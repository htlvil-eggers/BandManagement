package pkgRest;

import java.sql.SQLException;
import java.util.Vector;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import pkgModel.OracleDatabaseManager;

//"jdbc:oracle:thin:@192.168.128.151:1521:ora11g"
//"jdbc:oracle:thin:@212.152.179.117:1521:ora11g"

@Path("Musician")
public class BandmemberService {
	private final String CONNECTION_STRING = "jdbc:oracle:thin:@212.152.179.117:1521:ora11g";
	private final String USERNAME = "d5bhifs25";
	private final String PASSWORD = "edelBlech";
	
	@GET
	@Path("{bandname}")
	@Produces({MediaType.APPLICATION_XML})
	public Vector<pkgModel.Musician> getBandmembers(@PathParam ("bandname") String bandname) {
		Vector<pkgModel.Musician> musicians = null;
		
		try (OracleDatabaseManager dbManager = new OracleDatabaseManager (CONNECTION_STRING, USERNAME, PASSWORD)) {
			musicians = dbManager.getMusiciansOfBand(bandname);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		return musicians;
	}
	
	@POST
	@Path("{bandname}/{musicianName")
	public void postBandmember(@PathParam("musicianName") String musicianName, @PathParam ("bandname") String bandname) {
		try (OracleDatabaseManager dbManager = new OracleDatabaseManager (CONNECTION_STRING, USERNAME, PASSWORD)) {
			dbManager.addBandmember(bandname, musicianName);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	@DELETE
	@Path("{bandname}/{musicianName")
	public void
}
